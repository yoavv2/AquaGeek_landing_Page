---
interface Props {}

interface Testimonial {
    name: string;
    avatar: string
    text?: string;
    role?: string;
    screenshot?: string;
}

const testimonials: Testimonial[] = [
    {
        name: 'נועה זגורי',
        text: 'תותח! שירות מצויין ומקצועי!! מומלץ בחום',
        role: '',
     avatar:'https://api.dicebear.com/9.x/adventurer/svg?seed=Aiden&hair=long01'
    },
    {
        name: 'נתנאל',
        text: 'ממליץ מאוד על השירות של אסף נותן הדרכה מלאה בצורה מקצועית ועיניינית ותמיד זמין לכל שאלה בכל זמן',
        role: 'בעל אקווריום ריף',
        avatar:'https://api.dicebear.com/9.x/adventurer/svg?seed=Jude&hair=short07'
    },
    {
        name: 'חיים יעקב',
        text: 'אסף קודם כל איש נפלא, מקצוען אמיתי ואמין, אנחנו ממליצים',
        role: 'לקוח ותיק',
        avatar:'https://api.dicebear.com/9.x/adventurer/svg?seed=Alexander&hair=short08'
    },
    {
        name: 'ישראלה אלפנדרי',
        text: `מרוצה מאוד מהשירות המקצועי ואדיב של אסף בנושא האקווריום...כמו כן ההסבר והסבלנות ללקוח...תמיד זמין לענות לשאלות...מגיע בזמן ובמועד שנקבע...
        לסיכום:...אדיב,  מקצועי,  מדייק ואוהב את עבודתו .. ולפיכך הלקוח רק מרוויח.`,    
        role: 'בעלת אקווריום מים מתוקים',
        avatar:'https://api.dicebear.com/9.x/adventurer/svg?seed=Kingston&hair=long06'
    }
];


---

<section class="testimonials">
    <div class="container">
        <h2 class="text-[2.5rem] text-center text-[--primary-dark] mb-12">מה הלקוחות אומרים</h2>
        <div class="whatsapp-chat">
            {testimonials.map((testimonial, index) => (
                <div class={`message-group ${index > 0 ? 'mt-8' : ''}`}>
                    <div class="date-separator">
                        <span>{index === 0 ? 'היום' : 'אתמול'}</span>
                    </div>
                    <div class="message-info">
                        <img 
                            src={testimonial.avatar}
                            alt={`Avatar of ${testimonial.name}`}
                            class="avatar"
                            width="40"
                            height="40"
                        />
                        <div class="name-role">
                            <strong class="name">{testimonial.name}</strong>
                            {testimonial.role && <span class="role">{testimonial.role}</span>}
                        </div>
                    </div>
                    <div class="message">
                        <p class="text">{testimonial.text}</p>
                        <span class="time">✓✓</span>
                    </div>
                </div>
            ))}
        </div>
    </div>
</section>

<style>
    .testimonials {
        padding: 5rem 0;
        background-color: #efeae2;
        min-height: 50dvh;
        direction: rtl;
    }

    .container {
        max-width: 800px;
        margin: 0 auto;
        padding: 0 1rem;
    }

    .whatsapp-chat {
        display: flex;
        flex-direction: column;
        
    }

    .message-group {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        position: relative;
        margin-bottom: 1rem;
    }

    .date-separator {
        text-align: center;
        width: 100%;
        margin: 1rem 0;
    }

    .date-separator span {
        background-color: #e1f2fa;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        font-size: 0.75rem;
        color: #667781;
        box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.13);
    }

    .message-info {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0 1rem;
    }

    .avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background-color: #e1f2fa;
        box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.13);
    }

    .name-role {
        display: flex;
        flex-direction: column;
        gap: 0.125rem;
    }

    .name {
        color: #075e54;
        font-size: 0.9rem;
    }

    .role {
        color: #667781;
        font-size: 0.8rem;
    }

    .message {
        background-color: white;
        padding: 0.5rem 1rem;
        border-radius: 0.5rem;
        position: relative;
        max-width: 80%;
        box-shadow: 0 1px 0.5px rgba(0, 0, 0, 0.13);
        margin-right: 3.5rem;
    }

    .message::before {
        content: "";
        position: absolute;
        top: 0.8px;
        left: -6px;
        border: 8px solid transparent;
        border-left: none;
        border-right-color: white;
    }

    .text {
        color: #111b21;
        font-size: 0.95rem;
        line-height: 1.4;
        white-space: pre-line;
    }

    .time {
        display: block;
        text-align: left;
        font-size: 0.75rem;
        color: #667781;
        margin-top: 0.25rem;
    }

    @media (max-width: 640px) {
        .message {
            max-width: 90%;
        }

        .avatar {
            width: 32px;
            height: 32px;
        }
    }
</style>